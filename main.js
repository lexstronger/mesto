(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o){var i=o.handleCardClick,u=o.handleRemoveTrashButton,a=o.handlePutLike,c=o.handleRemoveLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._cardIdOwner=e.owner._id,this._likes=e.likes,this._userId=n,this._template=r,this._handleCardClick=i,this._handleRemoveTrashButton=u,this._handlePutLike=a,this._handleRemoveLike=c}var n,r;return n=t,(r=[{key:"_getElementFromTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".card__item").cloneNode(!0)}},{key:"getElement",value:function(){return this._element=this._getElementFromTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__trash"),this._quantityLikes=this._element.querySelector(".card__quantity-likes"),this._quantityLikes.textContent=this._likes.length,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._element.querySelector(".card__name").textContent=this._name,this._isOwnCard(),this._isLiked(),this._addEventListeners(),this._element}},{key:"_addEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._handleRemoveTrashButton(t._cardId)})),this._likeButton.addEventListener("click",(function(){t._definesLikes()})),this._cardImage.addEventListener("click",(function(){t._openImage()}))}},{key:"handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"handleLikeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._quantityLikes.textContent=this._likes.length}},{key:"_openImage",value:function(){this._handleCardClick(this._name,this._link)}},{key:"_definesLikes",value:function(){this._likeButton.classList.contains("card__like_active")?this._handleRemoveLike(this._cardId):this._handlePutLike(this._cardId)}},{key:"_isOwnCard",value:function(){this._userId!==this._cardIdOwner&&this._deleteButton.remove()}},{key:"_isLiked",value:function(){var t=this;this._likes.some((function(e){return e._id===t._userId}))?this._likeButton.classList.add("card__like_active"):this._likeButton.classList.remove("card__like_active")}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();const r=n;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disabledButton():(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_disabledButton",value:function(){this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled","disabled")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const a=u;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}const s=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}const y=function(){function t(e){var n=e.profileNameSelector,r=e.profileDescriptionSelector,o=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,description:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._profileName.textContent=e,this._profileDescription.textContent=n,this._profileAvatar.src=r}},{key:"getUserId",value:function(){return this._id}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}const _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._buttonClose=this._popup.querySelector(".popup__cross")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){t.preventDefault(),"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup")&&t.close()})),this._buttonClose.addEventListener("click",(function(){t.close()}))}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._title=e._popup.querySelector(".popup__title"),e}return e=u,(n=[{key:"open",value:function(t){b(S(u.prototype),"open",this).call(this),this._image.src=t.link,this._image.alt=t.name,this._title.textContent=t.name}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}const L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._form.querySelectorAll(".popup__input")),n._buttonSubmit=n._form.querySelector(".popup__button"),n._textButtonSubmit=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsValues={},this._inputList.forEach((function(e){t._inputsValues[e.name]=e.value})),this._inputsValues}},{key:"setEventListeners",value:function(){var t=this;P(j(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){P(j(u.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoadingData",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._textButtonSubmit}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._formConfirm=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"changeHandleFormSubmit",value:function(t){this._handleSubmit=t}},{key:"setEventListeners",value:function(){var t=this;I(R(u.prototype),"setEventListeners",this).call(this),this._formConfirm.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit()}))}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}const A=function(){function t(e){var n=e.basePath,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._basePath=n,this._headers=r}var e,n;return e=t,(n=[{key:"_getJson",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"_request",value:function(t,e){return fetch(t,e).then(this._getJson)}},{key:"getInitialCards",value:function(){return this._request("".concat(this._basePath,"/cards"),{headers:this._headers})}},{key:"getCurrentUser",value:function(){return this._request("".concat(this._basePath,"/users/me"),{headers:this._headers})}},{key:"editProfileInfo",value:function(t){return this._request("".concat(this._basePath,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.description})})}},{key:"addNewCard",value:function(t){return this._request("".concat(this._basePath,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})})}},{key:"editProfileAvatar",value:function(t){return this._request("".concat(this._basePath,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})})}},{key:"deleteCard",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t),{method:"DELETE",headers:this._headers})}},{key:"putLike",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers})}},{key:"deleteLike",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers})}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var V={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},N=document.querySelector(".profile__button"),U=document.querySelector(".popup_type_edit").querySelector(".popup__form"),F=U.querySelector(".popup__input_type_name"),J=U.querySelector(".popup__input_type_description"),H=document.querySelector(".popup_type_new-card").querySelector(".popup__form"),M=document.querySelector(".profile__add-button"),z=document.querySelector(".popup_type_avatar").querySelector(".popup__form"),$=document.querySelector(".profile__avatar-btn");function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=new A({basePath:"https://mesto.nomoreparties.co/v1/cohort-61",headers:{authorization:"d0048b8d-b031-4f52-9b12-6a593e4f7ea8","Content-Type":"application/json"}});Promise.all([K.getInitialCards(),K.getCurrentUser()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q=i._id,Y.renderItems(o),Z.setUserInfo({name:i.name,about:i.about,avatar:i.avatar})})).catch((function(t){console.log("Ошибка: ".concat(t))}));var Q,W=new k(".popup_type_image");W.setEventListeners();var X=function(t){var e=new r(t,Q,".template-card",{handleCardClick:function(t,e){W.open({name:t,link:e})},handleRemoveTrashButton:function(t){rt.open(),rt.changeHandleFormSubmit((function(){K.deleteCard(t).then((function(){rt.close(),e.handleDeleteCard()})).catch((function(t){console.log("Ошибка: ".concat(t))}))}))},handlePutLike:function(t){K.putLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))},handleRemoveLike:function(t){K.deleteLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))}});return e.getElement()},Y=new s({renderer:function(t){Y.addItem(X(t))}},".photo-grid__list"),Z=new y({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description",profileAvatarSelector:".profile__avatar"}),tt=new L(".popup_type_edit",(function(t){tt.renderLoadingData(!0),K.editProfileInfo(t).then((function(t){Z.setUserInfo(t),tt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){tt.renderLoadingData(!1)}))}));tt.setEventListeners();var et=new L(".popup_type_avatar",(function(t){et.renderLoadingData(!0),K.editProfileAvatar(t).then((function(t){Z.setUserInfo(t),et.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){et.renderLoadingData(!1)}))}));et.setEventListeners();var nt=new L(".popup_type_new-card",(function(t){nt.renderLoadingData(!0),K.addNewCard(t).then((function(t){Y.addItem(X(t)),nt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){nt.renderLoadingData(!1)}))}));nt.setEventListeners();var rt=new B(".popup_type_confirm");rt.setEventListeners(),N.addEventListener("click",(function(){tt.open(),it.resetValidation();var t=Z.getUserInfo();F.value=t.name,J.value=t.description})),M.addEventListener("click",(function(){nt.open(),ot.resetValidation()})),$.addEventListener("click",(function(){et.open(),ut.resetValidation()}));var ot=new a(V,H),it=new a(V,U),ut=new a(V,z);ot.enableValidation(),it.enableValidation(),ut.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCB1c2VySWQsIHRlbXBsYXRlLCB7aGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbiwgaGFuZGxlUHV0TGlrZSwgaGFuZGxlUmVtb3ZlTGlrZX0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSWRPd25lciA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVJlbW92ZVRyYXNoQnV0dG9uID0gaGFuZGxlUmVtb3ZlVHJhc2hCdXR0b247XHJcbiAgICB0aGlzLl9oYW5kbGVQdXRMaWtlID0gaGFuZGxlUHV0TGlrZTtcclxuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xyXG4gIH1cclxuICBcclxuXHJcbiAgX2dldEVsZW1lbnRGcm9tVGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faXRlbScpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudEZyb21UZW1wbGF0ZSgpOyAgICBcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gnKTtcclxuICAgIHRoaXMuX3F1YW50aXR5TGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19xdWFudGl0eS1saWtlcycpO1xyXG4gICAgdGhpcy5fcXVhbnRpdHlMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faXNPd25DYXJkKCk7XHJcbiAgICB0aGlzLl9pc0xpa2VkKCk7XHJcbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7dGhpcy5faGFuZGxlUmVtb3ZlVHJhc2hCdXR0b24odGhpcy5fY2FyZElkKX0pO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHt0aGlzLl9kZWZpbmVzTGlrZXMoKX0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuX29wZW5JbWFnZSgpfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlrZUNhcmQoZGF0YSkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fcXVhbnRpdHlMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9vcGVuSW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgfVxyXG5cclxuICBfZGVmaW5lc0xpa2VzKCkge1xyXG4gICAgaWYodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2VfYWN0aXZlJykpIHtcclxuICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzLl9jYXJkSWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGFuZGxlUHV0TGlrZSh0aGlzLl9jYXJkSWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2lzT3duQ2FyZCgpIHtcclxuICAgIGlmKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fY2FyZElkT3duZXIpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaXNMaWtlZCgpIHtcclxuICAgIGlmKHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG4vLyDQv9C+0LrQsNC30LDRgtGMINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcbi8vINGB0LrRgNGL0YLRjCDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfVxyXG4vLyDQv9GA0L7QstC10YDQutCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LjQvdC/0YPRgtC+0LJcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5IChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuLy8g0L/QtdGA0LXQutC70Y7Rh9C10L3QuNC1INC60L3QvtC/0LrQuCDQvdCwINCw0LrRgtC40LLQvdGD0Y4g0LjQu9C4INC90LXQsNC60YLQuNCy0L3Rg9GOXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlZEJ1dHRvbigpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICB9IFxyXG4gIH1cclxuLy8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDRhNC+0YDQvFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4vLyDRgdCx0YDQvtGBINCw0LrRgtC40LLQvdC+0Lkg0LrQvdC+0L/QutC4XHJcbiAgX2Rpc2FibGVkQnV0dG9uICgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gIH07XHJcbi8vINC/0YDQvtCy0LXRgNC60LAg0L3QsCDQvdCw0LvQuNGH0LjQtSDQvdC10LLQsNC70LjQtNC90L7Qs9C+INC40L3Qv9GD0YLQsFxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG4gIH07XHJcbiAgLy/QvtGH0LjRgdGC0LrQsCDQuNC90L/Rg9GC0L7QsiDQvtGCINC+0YjQuNCx0L7QuiDQuCDRg9C/0YDQsNCy0LvQtdC90LjQtSDQutC90L7Qv9C60L7QuSDRgdCw0LHQvNC40YLQsFxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KVxyXG4gIH1cclxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINC40L3Qv9GD0YLQvtCyXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHsgXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAgICBcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMucmV2ZXJzZSgpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uOyIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7cHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsIHByb2ZpbGVBdmF0YXJTZWxlY3Rvcn0pe1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgICBhdmF0YXI6IHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBhdmF0YXJcclxuICB9XHJcblxyXG4gIGdldFVzZXJJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvOyIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9idXR0b25DbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY3Jvc3MnKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xyXG4gICAgICBpZihldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH19KTtcclxuICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuY2xvc2UoKX0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGUnKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaXRlbSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gaXRlbS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gaXRlbS5uYW1lO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7ICAgIFxyXG4gIH1cclxuICBcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG4gICAgdGhpcy5fdGV4dEJ1dHRvblN1Ym1pdCA9IHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0c1ZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0c1ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSlcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dHNWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmdEYXRhKGlzTG9hZGluZykge1xyXG4gICAgaWYoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0QnV0dG9uU3VibWl0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuY2xhc3MgUG9wdXBDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtQ29uZmlybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlSGFuZGxlRm9ybVN1Ym1pdChhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1Db25maXJtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwQ29uZmlybWF0aW9uOyIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Ioe2Jhc2VQYXRoLCBoZWFkZXJzfSkge1xyXG4gICAgdGhpcy5fYmFzZVBhdGggPSBiYXNlUGF0aDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2dldEpzb24ocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9nZXRKc29uKVxyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkc2AsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRDdXJyZW50VXNlcigpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgIGxpbms6IGRhdGEubGluayxcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZUF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcclxuICAgICAgYCR7dGhpcy5fYmFzZVBhdGh9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHV0TGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpOyIsImNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xyXG59O1xyXG5cclxuY29uc3QgYnV0dG9uT3BlbkluZm9Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5jb25zdCBpbmZvUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0Jyk7XHJcbmNvbnN0IGZvcm1FZGl0UHJvZmlsZVBvcHVwID0gaW5mb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBmb3JtRWRpdFByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5jb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZm9ybUVkaXRQcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyk7XHJcbi8vINC/0LXRgNC10LzQtdC90L3Ri9C1INC00LvRjyDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgY2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbmV3LWNhcmQnKTtcclxuY29uc3QgbmV3Q2FyZEZvcm0gPSBjYXJkUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmNvbnN0IGNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG4vLyDQv9C10YDQtdC80LXQvdC90YvQtSDQtNC70Y8g0L/QvtC/0LDQv9CwINCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IGF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYXZhdGFyJyk7XHJcbmNvbnN0IGZvcm1BdmF0YXIgPSBhdmF0YXJQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuY29uc3QgYnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idG4nKVxyXG5cclxuZXhwb3J0IHtzZXR0aW5ncywgYnV0dG9uT3BlbkluZm9Qcm9maWxlLCBmb3JtRWRpdFByb2ZpbGVQb3B1cCwgaW5wdXROYW1lLCBpbnB1dERlc2NyaXB0aW9uLCBuZXdDYXJkRm9ybSwgY2FyZEJ1dHRvbiwgZm9ybUF2YXRhciwgYnV0dG9uQXZhdGFyfSIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0ICBTZWN0aW9uICBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtzZXR0aW5ncywgYnV0dG9uT3BlbkluZm9Qcm9maWxlLCBmb3JtRWRpdFByb2ZpbGVQb3B1cCwgaW5wdXROYW1lLCBpbnB1dERlc2NyaXB0aW9uLCBuZXdDYXJkRm9ybSwgY2FyZEJ1dHRvbiwgZm9ybUF2YXRhciwgYnV0dG9uQXZhdGFyIH0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VQYXRoOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MScsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2QwMDQ4YjhkLWIwMzEtNGY1Mi05YjEyLTZhNTkzZTRmN2VhOCcsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfVxyXG59KTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRDdXJyZW50VXNlcigpXSlcclxuLnRoZW4oKFtpbml0aWFsQ2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xyXG4gIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICBjYXJkc0NvbnRhaW5lci5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG4gIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHtuYW1lOiB1c2VyRGF0YS5uYW1lLCBhYm91dDogdXNlckRhdGEuYWJvdXQsIGF2YXRhcjogdXNlckRhdGEuYXZhdGFyfSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbi8vINGB0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCDQuCDQtdC1INGE0YPQvdC60YbQuNC+0L3QsNC70LBcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIHVzZXJJZCwnLnRlbXBsYXRlLWNhcmQnLFxyXG4gICAge2hhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgICBwb3B1cEltYWdlLm9wZW4oe25hbWUsIGxpbmt9KTtcclxuICAgICAgfSxcclxuICAgIGhhbmRsZVJlbW92ZVRyYXNoQnV0dG9uOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgIHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oKTtcclxuICAgICAgcG9wdXBDb25maXJtYXRpb24uY2hhbmdlSGFuZGxlRm9ybVN1Ym1pdCgoKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBoYW5kbGVQdXRMaWtlOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGFwaS5wdXRMaWtlKGNhcmRJZClcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VDYXJkKGRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZVJlbW92ZUxpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmQuaGFuZGxlTGlrZUNhcmQoZGF0YSlcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgfSk7XHJcbiAgICB9fVxyXG4gKTtcclxuY29uc3QgY2FyZE9iamVjdCA9IGNhcmQuZ2V0RWxlbWVudCgpO1xyXG5yZXR1cm4gY2FyZE9iamVjdDtcclxufVxyXG5cclxuLy8g0YHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstC60Lgg0LrQsNGA0YLQvtGH0LXQulxyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGNhcmQpID0+IHtcclxuICAgIGNhcmRzQ29udGFpbmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkKSlcclxuICB9fSwgJy5waG90by1ncmlkX19saXN0Jyk7XHJcblxyXG5cclxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxyXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInXHJcbn0pO1xyXG5cclxuLy8g0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHBvcHVwSW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JywgaGFuZGxlSW5mb0Zvcm1TdWJtaXQpO1xyXG5wb3B1cEluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUluZm9Gb3JtU3VibWl0KGRhdGFQcm9maWxlKSB7XHJcbiAgcG9wdXBJbmZvLnJlbmRlckxvYWRpbmdEYXRhKHRydWUpO1xyXG4gIGFwaS5lZGl0UHJvZmlsZUluZm8oZGF0YVByb2ZpbGUpXHJcbiAgLnRoZW4oKGRhdGFQcm9maWxlKSA9PiB7XHJcbiAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhkYXRhUHJvZmlsZSlcclxuICAgIHBvcHVwSW5mby5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgcG9wdXBJbmZvLnJlbmRlckxvYWRpbmdEYXRhKGZhbHNlKTtcclxuICB9KTtcclxuICB9XHJcblxyXG4vLyDQv9C+0L/QsNC/INCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhcicsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xyXG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChkYXRhKSB7XHJcbnBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmdEYXRhKHRydWUpO1xyXG5hcGkuZWRpdFByb2ZpbGVBdmF0YXIoZGF0YSlcclxuLnRoZW4oKGRhdGEpID0+IHtcclxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG59KVxyXG4uZmluYWxseSgoKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZ0RhdGEoZmFsc2UpO1xyXG59KVxyXG59XHJcblxyXG4vL9C/0L7Qv9Cw0L8g0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgcG9wdXBOZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX25ldy1jYXJkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5wb3B1cE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGRhdGFDYXJkKSB7XHJcbiAgcG9wdXBOZXdDYXJkLnJlbmRlckxvYWRpbmdEYXRhKHRydWUpO1xyXG4gIGFwaS5hZGROZXdDYXJkKGRhdGFDYXJkKVxyXG4gIC50aGVuKGRhdGFDYXJkID0+IHtcclxuICAgIGNhcmRzQ29udGFpbmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhQ2FyZCkpO1xyXG4gICAgcG9wdXBOZXdDYXJkLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwb3B1cE5ld0NhcmQucmVuZGVyTG9hZGluZ0RhdGEoZmFsc2UpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9jb25maXJtJyk7XHJcbnBvcHVwQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDRgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y8g0YEg0L/QvtC00YHRgtCw0LLQu9C10L3QuNC10Lwg0LfQvdCw0YfQtdC90LjQuSDQvtGC0YLRg9C00LAg0LIg0L/QvtC/0LDQv1xyXG5idXR0b25PcGVuSW5mb1Byb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBJbmZvLm9wZW4oKTtcclxuICB2YWxpZGF0b3JQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IGN1cnJlbnRQcm9maWxlSW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gY3VycmVudFByb2ZpbGVJbmZvLm5hbWU7XHJcbiAgaW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IGN1cnJlbnRQcm9maWxlSW5mby5kZXNjcmlwdGlvbjsgIFxyXG59KVxyXG5jYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwTmV3Q2FyZC5vcGVuKCk7XHJcbiAgdmFsaWRhdG9yQ2FyZC5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbiAgdmFsaWRhdG9yQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHZhbGlkYXRvckNhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgbmV3Q2FyZEZvcm0pO1xyXG5jb25zdCB2YWxpZGF0b3JQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FZGl0UHJvZmlsZVBvcHVwKVxyXG5jb25zdCB2YWxpZGF0b3JBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUF2YXRhcik7XHJcbnZhbGlkYXRvckNhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JQcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRhdG9yQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTsiXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ1c2VySWQiLCJ0ZW1wbGF0ZSIsIl9yZWYiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbiIsImhhbmRsZVB1dExpa2UiLCJoYW5kbGVSZW1vdmVMaWtlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfY2FyZElkT3duZXIiLCJvd25lciIsIl9saWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlUmVtb3ZlVHJhc2hCdXR0b24iLCJfaGFuZGxlUHV0TGlrZSIsIl9oYW5kbGVSZW1vdmVMaWtlIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0RWxlbWVudEZyb21UZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9kZWxldGVCdXR0b24iLCJfcXVhbnRpdHlMaWtlcyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiYWx0Iiwic3JjIiwiX2lzT3duQ2FyZCIsIl9pc0xpa2VkIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlZmluZXNMaWtlcyIsIl9vcGVuSW1hZ2UiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjb250YWlucyIsIl90aGlzMiIsInNvbWUiLCJsaWtlIiwiYWRkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlZEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldEF0dHJpYnV0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJkZXNjcmlwdGlvbiIsImF2YXRhciIsIl9yZWYyIiwiYWJvdXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2J1dHRvbkNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjbG9zZSIsInRhcmdldCIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIlBvcHVwV2l0aEltYWdlIiwiX3N1cGVyIiwiY2FsbCIsIl9pbWFnZSIsIl90aXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfYnV0dG9uU3VibWl0IiwiX3RleHRCdXR0b25TdWJtaXQiLCJfaW5wdXRzVmFsdWVzIiwiaW5wdXQiLCJfdGhpczMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImlzTG9hZGluZyIsIlBvcHVwQ29uZmlybWF0aW9uIiwiX2Zvcm1Db25maXJtIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdCIsImV2dCIsIkFwaSIsImJhc2VQYXRoIiwiaGVhZGVycyIsIl9iYXNlUGF0aCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJfZ2V0SnNvbiIsIl9yZXF1ZXN0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmb3JtU2VsZWN0b3IiLCJidXR0b25PcGVuSW5mb1Byb2ZpbGUiLCJmb3JtRWRpdFByb2ZpbGVQb3B1cCIsImlucHV0TmFtZSIsImlucHV0RGVzY3JpcHRpb24iLCJuZXdDYXJkRm9ybSIsImNhcmRCdXR0b24iLCJmb3JtQXZhdGFyIiwiYnV0dG9uQXZhdGFyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldEN1cnJlbnRVc2VyIiwiaW5pdGlhbENhcmRzIiwidXNlckRhdGEiLCJjYXJkc0NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwicHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInBvcHVwSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsImNyZWF0ZUNhcmQiLCJjYXJkIiwib3BlbiIsImNhcmRJZCIsInBvcHVwQ29uZmlybWF0aW9uIiwiY2hhbmdlSGFuZGxlRm9ybVN1Ym1pdCIsImRlbGV0ZUNhcmQiLCJoYW5kbGVEZWxldGVDYXJkIiwicHV0TGlrZSIsImhhbmRsZUxpa2VDYXJkIiwiZGVsZXRlTGlrZSIsImdldEVsZW1lbnQiLCJhZGRJdGVtIiwicG9wdXBJbmZvIiwiZGF0YVByb2ZpbGUiLCJyZW5kZXJMb2FkaW5nRGF0YSIsImVkaXRQcm9maWxlSW5mbyIsImZpbmFsbHkiLCJwb3B1cEF2YXRhciIsImVkaXRQcm9maWxlQXZhdGFyIiwicG9wdXBOZXdDYXJkIiwiZGF0YUNhcmQiLCJhZGROZXdDYXJkIiwidmFsaWRhdG9yUHJvZmlsZSIsInJlc2V0VmFsaWRhdGlvbiIsImN1cnJlbnRQcm9maWxlSW5mbyIsImdldFVzZXJJbmZvIiwidmFsaWRhdG9yQ2FyZCIsInZhbGlkYXRvckF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9