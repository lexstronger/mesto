(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o){var i=o.handleCardClick,u=o.handleRemoveTrashButton,a=o.handlePutLike,c=o.handleRemoveLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._cardIdOwner=e.owner._id,this._likes=e.likes,this._userId=n,this._template=r,this._handleCardClick=i,this._handleRemoveTrashButton=u,this._handlePutLike=a,this._handleRemoveLike=c}var n,r;return n=t,(r=[{key:"_getElementFromTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".card__item").cloneNode(!0)}},{key:"getElement",value:function(){return this._element=this._getElementFromTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__trash"),this._quantityLikes=this._element.querySelector(".card__quantity-likes"),this._quantityLikes.textContent=this._likes.length,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._element.querySelector(".card__name").textContent=this._name,this._isOwnCard(),this._isLiked(),this._addEventListeners(),this._element}},{key:"_addEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._cleanCardOfDeleteButton()})),this._likeButton.addEventListener("click",(function(){t._definesLikes()})),this._cardImage.addEventListener("click",(function(){t._openImage()}))}},{key:"handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"handleLikeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._quantityLikes.textContent=this._likes.length}},{key:"_openImage",value:function(){this._handleCardClick(this._name,this._link)}},{key:"_cleanCardOfDeleteButton",value:function(){this._handleRemoveTrashButton(this._cardId)}},{key:"_definesLikes",value:function(){this._likeButton.classList.contains("card__like_active")?this._handleRemoveLike(this._cardId):this._handlePutLike(this._cardId)}},{key:"_isOwnCard",value:function(){this._userId!==this._cardIdOwner&&this._deleteButton.remove()}},{key:"_isLiked",value:function(){var t=this;this._likes.some((function(e){return e._id===t._userId}))?this._likeButton.classList.add("card__like_active"):this._likeButton.classList.remove("card__like_active")}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();const r=n;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disabledButton():(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_disabledButton",value:function(){this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled","disabled")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"enableValidation",value:function(){var t=this;this._formElement.addEventListener("submit",(function(){t._disabledButton()})),this._setEventListeners()}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const a=u;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}const s=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}const y=function(){function t(e){var n=e.profileNameSelector,r=e.profileDescriptionSelector,o=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,description:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.description,r=t.avatar;this._profileName.textContent=e,this._profileDescription.textContent=n,this._profileAvatar.src=r}},{key:"getUserId",value:function(){return this._id}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}const m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._buttonClose=this._popup.querySelector(".popup__cross")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){t.preventDefault(),"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup")&&t.close()})),this._buttonClose.addEventListener("click",(function(){t.close()}))}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._title=e._popup.querySelector(".popup__title"),e}return e=u,(n=[{key:"open",value:function(t){b(S(u.prototype),"open",this).call(this),this._image.src=t.link,this._image.alt=t.name,this._title.textContent=t.name}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}const C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._form.querySelectorAll(".popup__input")),n._buttonSubmit=n._form.querySelector(".popup__button"),n._textButtonSubmit=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsValues={},this._inputList.forEach((function(e){t._inputsValues[e.name]=e.value})),this._inputsValues}},{key:"setEventListeners",value:function(){var t=this;P(j(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){P(j(u.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoadingData",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._textButtonSubmit}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},T.apply(this,arguments)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._formConfirm=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"changeHandleFormSubmit",value:function(t){this._handleSubmit=t}},{key:"setEventListeners",value:function(){var t=this;T(R(u.prototype),"setEventListeners",this).call(this),this._formConfirm.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit()}))}}])&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);var x={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},D=document.querySelector(".profile__button"),A=document.querySelector(".popup_type_edit").querySelector(".popup__form"),H=A.querySelector(".popup__input_type_name"),J=A.querySelector(".popup__input_type_description"),N=document.querySelector(".popup_type_new-card").querySelector(".popup__form"),U=document.querySelector(".profile__add-button");function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}const M=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._basePath=e,this._token=n}var e,n;return e=t,(n=[{key:"_getHeaders",value:function(){return{"Content-Type":"application/json",authorization:this._token}}},{key:"_getJson",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._basePath,"/cards"),{headers:this._getHeaders()}).then(this._getJson)}},{key:"getCurrentUser",value:function(){return fetch("".concat(this._basePath,"/users/me"),{headers:this._getHeaders()}).then(this._getJson)}},{key:"editProfileInfo",value:function(t){return fetch("".concat(this._basePath,"/users/me"),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({name:t.name,about:t.description})}).then(this._getJson)}},{key:"addNewCard",value:function(t){return fetch("".concat(this._basePath,"/cards"),{method:"POST",headers:this._getHeaders(),body:JSON.stringify({name:t.name,link:t.link})}).then(this._getJson)}},{key:"editProfileAvatar",value:function(t){return fetch("".concat(this._basePath,"/users/me/avatar"),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({avatar:t.avatar})}).then(this._getJson)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t),{method:"DELETE",headers:this._getHeaders()}).then(this._getJson)}},{key:"putLike",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._getHeaders()}).then(this._getJson)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._getHeaders()}).then(this._getJson)}}])&&F(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $,G=new k(".popup_type_image");G.setEventListeners();var K=function(t){var e=new r(t,$,".template-card",{handleCardClick:function(t,e){G.open({name:t,link:e})},handleRemoveTrashButton:function(t){Z.open(),Z.changeHandleFormSubmit((function(){nt.deleteCard(t).then((function(){Z.close(),e.handleDeleteCard()})).catch((function(t){console.log("Ошибка: ".concat(t))}))}))},handlePutLike:function(t){nt.putLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))},handleRemoveLike:function(t){nt.deleteLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))}});return e.getElement()},Q=new s({renderer:function(t){Q.addItem(K(t))}},".photo-grid__list"),W=new y({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description",profileAvatarSelector:".profile__avatar"}),X=new C(".popup_type_edit",(function(t){W.setUserInfo({name:t.name,description:t.description}),X.close()}));X.setEventListeners(),D.addEventListener("click",(function(){X.open();var t=W.getUserInfo();H.value=t.name,J.value=t.description}));var Y=new C(".popup_type_new-card",(function(t){var e=K(t.title,t.link);Q.addItem(e)}));Y.setEventListeners();var Z=new B(".popup_type_confirm",(function(t){Z.changeHandleFormSubmit((function(){nt.deleteCard(t).then((function(){Z.cardId.remove(),Z.close()})).catch((function(t){console.log("Ошибка: ".concat(t))}))}))}));U.addEventListener("click",(function(){Y.open()}));var tt=new a(x,N),et=new a(x,A);tt.enableValidation(),et.enableValidation();var nt=new M("https://mesto.nomoreparties.co/v1/cohort-61","ac5a8fa3-72da-4dfb-8b23-f9b7c9cea421");Promise.all([nt.getInitialCards(),nt.getCurrentUser()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q.renderItems(o),W.setUserInfo({name:i.name,description:i.about,avatar:i.avatar}),$=i._id})).catch((function(t){console.log("Ошибка: ".concat(t))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBdkssR0FBOEIsSSxJQUFBMEcsRyxFQUFBLEUsNENBQUExRyxJLG8yQkFBNUJpTixFQUFZdkcsRUFBQSxHQUFFd0csRUFBUXhHLEVBQUEsR0FDNUJ1RixFQUFla0IsWUFBWUYsR0FDM0JkLEVBQVlFLFlBQVksQ0FBQzdMLEtBQU0wTSxFQUFTMU0sS0FBTWdHLFlBQWEwRyxFQUFTckMsTUFBT3BFLE9BQVF5RyxFQUFTekcsU0FDNUYzRyxFQUFTb04sRUFBU3RNLEdBQ3BCLElBQ0M2SyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksV0FBRHRILE9BQVlvSCxHQUN6QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdXNlcklkLCB0ZW1wbGF0ZSwge2hhbmRsZUNhcmRDbGljaywgaGFuZGxlUmVtb3ZlVHJhc2hCdXR0b24sIGhhbmRsZVB1dExpa2UsIGhhbmRsZVJlbW92ZUxpa2V9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fY2FyZElkT3duZXIgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbiA9IGhhbmRsZVJlbW92ZVRyYXNoQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlUHV0TGlrZSA9IGhhbmRsZVB1dExpa2U7XHJcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlID0gaGFuZGxlUmVtb3ZlTGlrZTtcclxuICB9XHJcbiAgXHJcblxyXG4gIF9nZXRFbGVtZW50RnJvbVRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldEVsZW1lbnRGcm9tVGVtcGxhdGUoKTsgICAgXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoJyk7XHJcbiAgICB0aGlzLl9xdWFudGl0eUxpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcXVhbnRpdHktbGlrZXMnKTtcclxuICAgIHRoaXMuX3F1YW50aXR5TGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2lzT3duQ2FyZCgpO1xyXG4gICAgdGhpcy5faXNMaWtlZCgpO1xyXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuX2NsZWFuQ2FyZE9mRGVsZXRlQnV0dG9uKCl9KVxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHt0aGlzLl9kZWZpbmVzTGlrZXMoKX0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuX29wZW5JbWFnZSgpfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlrZUNhcmQoZGF0YSkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fcXVhbnRpdHlMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9vcGVuSW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgfVxyXG5cclxuICBfY2xlYW5DYXJkT2ZEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbih0aGlzLl9jYXJkSWQpO1xyXG4gIH1cclxuXHJcbiAgX2RlZmluZXNMaWtlcygpIHtcclxuICAgIGlmKHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkX19saWtlX2FjdGl2ZScpKSB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UodGhpcy5fY2FyZElkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVB1dExpa2UodGhpcy5fY2FyZElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9pc093bkNhcmQoKSB7XHJcbiAgICBpZih0aGlzLl91c2VySWQgIT09IHRoaXMuX2NhcmRJZE93bmVyKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2lzTGlrZWQoKSB7XHJcbiAgICBpZih0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuLy8g0L/QvtC60LDQt9Cw0YLRjCDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4vLyDRgdC60YDRi9GC0Ywg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMINC40L3Qv9GD0YLQvtCyXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbi8vINC/0LXRgNC10LrQu9GO0YfQtdC90LjQtSDQutC90L7Qv9C60Lgg0L3QsCDQsNC60YLQuNCy0L3Rg9GOINC40LvQuCDQvdC10LDQutGC0LjQstC90YPRjlxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgdGhpcy5fZGlzYWJsZWRCdXR0b24oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgfSBcclxuICB9XHJcbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YTQvtGA0LxcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuLy8g0YHQsdGA0L7RgSDQsNC60YLQuNCy0L3QvtC5INC60L3QvtC/0LrQuFxyXG4gIF9kaXNhYmxlZEJ1dHRvbiAoKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICB9O1xyXG4vLyDQv9GA0L7QstC10YDQutCwINC90LAg0L3QsNC70LjRh9C40LUg0L3QtdCy0LDQu9C40LTQvdC+0LPQviDQuNC90L/Rg9GC0LBcclxuICBfaGFzSW52YWxpZElucHV0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICB9KTtcclxuICB9O1xyXG4vLyDQv9C10YDQtdCx0L7RgCDRhNC+0YDQvCDQuNC3INC80LDRgdGB0LjQstCwXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcclxuICAgICAgdGhpcy5fZGlzYWJsZWRCdXR0b24oKTtcclxuICAgIH0pOyAgICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7ICAgIFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247IiwiY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHtwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciwgcHJvZmlsZUF2YXRhclNlbGVjdG9yfSl7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXJTZWxlY3RvcilcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fcHJvZmlsZUF2YXRhci5zcmNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHtuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhclxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87IiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2J1dHRvbkNsb3NlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jcm9zcycpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfTtcclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfX0pO1xyXG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7dGhpcy5jbG9zZSgpfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZScpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpdGVtKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpdGVtLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBpdGVtLm5hbWU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTsgICAgXHJcbiAgfVxyXG4gIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKSk7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XHJcbiAgICB0aGlzLl90ZXh0QnV0dG9uU3VibWl0ID0gdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRzVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXRzVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0c1ZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZ0RhdGEoaXNMb2FkaW5nKSB7XHJcbiAgICBpZihpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX3RleHRCdXR0b25TdWJtaXQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5jbGFzcyBQb3B1cENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1Db25maXJtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VIYW5kbGVGb3JtU3VibWl0KGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUNvbmZpcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBDb25maXJtYXRpb247IiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTtcclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xyXG59O1xyXG5cclxuY29uc3QgYnV0dG9uT3BlbkluZm9Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5jb25zdCBpbmZvUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0Jyk7XHJcbmNvbnN0IGZvcm1FZGl0UHJvZmlsZVBvcHVwID0gaW5mb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBmb3JtRWRpdFByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5jb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZm9ybUVkaXRQcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyk7XHJcbi8vINC/0LXRgNC10LzQtdC90L3Ri9C1INC00LvRjyDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgY2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbmV3LWNhcmQnKTtcclxuY29uc3QgbmV3Q2FyZEZvcm0gPSBjYXJkUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmNvbnN0IGNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5cclxuZXhwb3J0IHtpbml0aWFsQ2FyZHMsIHNldHRpbmdzLCBidXR0b25PcGVuSW5mb1Byb2ZpbGUsIGZvcm1FZGl0UHJvZmlsZVBvcHVwLCBpbnB1dE5hbWUsIGlucHV0RGVzY3JpcHRpb24sIG5ld0NhcmRGb3JtLCBjYXJkQnV0dG9ufSIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoYmFzZVBhdGgsIHRva2VuKSB7XHJcbiAgICB0aGlzLl9iYXNlUGF0aCA9IGJhc2VQYXRoO1xyXG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICB9XHJcblxyXG4gIF9nZXRIZWFkZXJzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9nZXRKc29uKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRVc2VyKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fZ2V0SnNvbik7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZUluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuZGVzY3JpcHRpb25cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2dldEpzb24pO1xyXG4gIH1cclxuXHJcbiAgcHV0TGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fZ2V0SnNvbik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCAgU2VjdGlvbiAgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtYXRpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNldHRpbmdzLCBidXR0b25PcGVuSW5mb1Byb2ZpbGUsIGZvcm1FZGl0UHJvZmlsZVBvcHVwLCBpbnB1dE5hbWUsIGlucHV0RGVzY3JpcHRpb24sIG5ld0NhcmRGb3JtLCBjYXJkQnV0dG9uIH0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCB1c2VySWQsJy50ZW1wbGF0ZS1jYXJkJyxcclxuICAgIHtoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKHtuYW1lLCBsaW5rfSk7XHJcbiAgICAgIH0sXHJcbiAgICBoYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbjogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmNoYW5nZUhhbmRsZUZvcm1TdWJtaXQoKCkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgaGFuZGxlUHV0TGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBhcGkucHV0TGlrZShjYXJkSWQpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2FyZChkYXRhKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVSZW1vdmVMaWtlOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZClcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VDYXJkKGRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfX1cclxuICk7XHJcbmNvbnN0IGNhcmRPYmplY3QgPSBjYXJkLmdldEVsZW1lbnQoKTtcclxucmV0dXJuIGNhcmRPYmplY3Q7XHJcbn1cclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINGB0LLRj9C30YvQstCw0L3QuNGPINC60LvQsNGB0YHQsCBDYXJkINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDQutCw0YDRgtC40L3QutC+0LkgXHJcbi8vIGNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChuYW1lLCBsaW5rKSA9PiB7XHJcbi8vICAgcG9wdXBJbWFnZS5vcGVuKHtuYW1lLCBsaW5rfSk7XHJcbi8vIH1cclxuXHJcbi8vIGNvbnN0IGhhbmRsZVJlbW92ZVRyYXNoQnV0dG9uID0gKGNhcmRJZCkgPT4ge1xyXG4vLyAgIHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oKTtcclxuLy8gICBwb3B1cENvbmZpcm1hdGlvbi5jaGFuZ2VIYW5kbGVGb3JtU3VibWl0KCgpID0+IHtcclxuLy8gICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuLy8gICAgIC50aGVuKCgpID0+IHtcclxuLy8gICAgICAgcG9wdXBDb25maXJtYXRpb24uY2xvc2UoKTtcclxuLy8gICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbi8vICAgICB9KTtcclxuLy8gICB9KVxyXG4vLyB9XHJcblxyXG4vLyBjb25zdCBoYW5kbGVQdXRMaWtlID0gKGNhcmRJZCkgPT4ge1xyXG4vLyAgIGFwaS5wdXRMaWtlKGNhcmRJZClcclxuLy8gICAudGhlbigoZGF0YSkgPT4ge1xyXG4vLyAgICAgY2FyZC5oYW5kbGVMaWtlQ2FyZChkYXRhKVxyXG4vLyAgIH0pXHJcbi8vICAgLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4vLyAgIH0pO1xyXG4vLyB9XHJcblxyXG4vLyBjb25zdCBoYW5kbGVSZW1vdmVMaWtlID0gKGNhcmRJZCkgPT4ge1xyXG4vLyAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZClcclxuLy8gICAudGhlbigoZGF0YSkgPT4ge1xyXG4vLyAgICAgY2FyZC5oYW5kbGVMaWtlQ2FyZChkYXRhKVxyXG4vLyAgIH0pXHJcbi8vICAgLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4vLyAgIH0pO1xyXG4vLyB9XHJcblxyXG5cclxuXHJcbi8vINGB0L7Qt9C00LDQtdC8INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAgU2VjdGlvbiDQtNC70Y8g0L7RgtGA0LjRgdC+0LLQutC4INC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xyXG4gICAgY2FyZHNDb250YWluZXIuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmQpKVxyXG4gIH19LCAnLnBob3RvLWdyaWRfX2xpc3QnKTtcclxuXHJcblxyXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXHJcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdCcsIGhhbmRsZUluZm9Gb3JtU3VibWl0KTtcclxucG9wdXBJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vINGE0YPQvdC60YbQuNGPINC00LvRjyDQuNC30LzQtdC90LXQvdC40Y8g0LjQvdGE0L7RgNC80LDRhtC40Lgg0L/RgNC+0YTQuNC70Y9cclxuZnVuY3Rpb24gaGFuZGxlSW5mb0Zvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHtuYW1lOiBkYXRhLm5hbWUsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9ufSk7XHJcbiAgcG9wdXBJbmZvLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRjyDRgSDQv9C+0LTRgdGC0LDQstC70LXQvdC40LXQvCDQt9C90LDRh9C10L3QuNC5INC+0YLRgtGD0LTQsCDQsiDQv9C+0L/QsNC/XHJcbmJ1dHRvbk9wZW5JbmZvUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEluZm8ub3BlbigpO1xyXG4gIGNvbnN0IGN1cnJlbnRQcm9maWxlSW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gY3VycmVudFByb2ZpbGVJbmZvLm5hbWU7XHJcbiAgaW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IGN1cnJlbnRQcm9maWxlSW5mby5kZXNjcmlwdGlvbjsgIFxyXG59KVxyXG5cclxuY29uc3QgcG9wdXBOZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX25ldy1jYXJkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5wb3B1cE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8g0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4INGH0LXRgNC10Lcg0L/QvtC/0LDQv1xyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChpdGVtKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaXRlbS50aXRsZSwgaXRlbS5saW5rKTtcclxuICBjYXJkc0NvbnRhaW5lci5hZGRJdGVtKG5ld0NhcmQpO1xyXG59XHJcblxyXG5jb25zdCBwb3B1cENvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfY29uZmlybScsIGhhbmRsZUNvbmZpcm1Gb3JtU3VibWl0KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1Gb3JtU3VibWl0KGNhcmRJZCkge1xyXG4gIHBvcHVwQ29uZmlybWF0aW9uLmNoYW5nZUhhbmRsZUZvcm1TdWJtaXQoKCkgPT4ge1xyXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cENvbmZpcm1hdGlvbi5jYXJkSWQucmVtb3ZlKCk7XHJcbiAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gIH0pXHJcbn1cclxuXHJcbmNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7cG9wdXBOZXdDYXJkLm9wZW4oKX0pXHJcblxyXG5jb25zdCB2YWxpZGF0b3JDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIG5ld0NhcmRGb3JtKTtcclxuY29uc3QgdmFsaWRhdG9yUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLGZvcm1FZGl0UHJvZmlsZVBvcHVwKVxyXG52YWxpZGF0b3JDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRhdG9yUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKFxyXG4gICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYxJyxcclxuICAnYWM1YThmYTMtNzJkYS00ZGZiLThiMjMtZjliN2M5Y2VhNDIxJyxcclxuKTtcclxuXHJcblxyXG5cclxuLy8gYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbi8vIC50aGVuKChpbml0aWFsQ2FyZHMpID0+IHtcclxuLy8gY2FyZHNDb250YWluZXIucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuLy8gfSlcclxuLy8gLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuLy8gfSk7XHJcblxyXG4vLyBhcGkuZ2V0Q3VycmVudFVzZXIoKVxyXG4vLyAudGhlbigodXNlckRhdGEpID0+IHtcclxuLy8gcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe25hbWU6IHVzZXJEYXRhLm5hbWUsIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5kZXNjcmlwdGlvbiwgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXJ9KTtcclxuLy8gdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4vLyB9KVxyXG4vLyAuY2F0Y2goKGVycikgPT4ge1xyXG4vLyAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4vLyB9KTtcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldEN1cnJlbnRVc2VyKCldKVxyXG4udGhlbigoW2luaXRpYWxDYXJkcywgdXNlckRhdGFdKSA9PiB7XHJcbiAgY2FyZHNDb250YWluZXIucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7bmFtZTogdXNlckRhdGEubmFtZSwgZGVzY3JpcHRpb246IHVzZXJEYXRhLmFib3V0LCBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcn0pO1xyXG4gIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxufSk7Il0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidXNlcklkIiwidGVtcGxhdGUiLCJfcmVmIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlUmVtb3ZlVHJhc2hCdXR0b24iLCJoYW5kbGVQdXRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2NhcmRJZE93bmVyIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl91c2VySWQiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVJlbW92ZVRyYXNoQnV0dG9uIiwiX2hhbmRsZVB1dExpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldEVsZW1lbnRGcm9tVGVtcGxhdGUiLCJfbGlrZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfZGVsZXRlQnV0dG9uIiwiX3F1YW50aXR5TGlrZXMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImFsdCIsInNyYyIsIl9pc093bkNhcmQiLCJfaXNMaWtlZCIsIl9hZGRFdmVudExpc3RlbmVycyIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jbGVhbkNhcmRPZkRlbGV0ZUJ1dHRvbiIsIl9kZWZpbmVzTGlrZXMiLCJfb3BlbkltYWdlIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJfdGhpczIiLCJzb21lIiwibGlrZSIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZWRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJzZXRBdHRyaWJ1dGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsInJldmVyc2UiLCJpdGVtIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsIl9wcm9maWxlQXZhdGFyIiwiZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJfcmVmMiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfYnV0dG9uQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3NlIiwidGFyZ2V0IiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlIiwiX3RpdGxlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9idXR0b25TdWJtaXQiLCJfdGV4dEJ1dHRvblN1Ym1pdCIsIl9pbnB1dHNWYWx1ZXMiLCJpbnB1dCIsIl90aGlzMyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiUG9wdXBDb25maXJtYXRpb24iLCJfZm9ybUNvbmZpcm0iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0IiwiZXZ0IiwiZm9ybVNlbGVjdG9yIiwiYnV0dG9uT3BlbkluZm9Qcm9maWxlIiwiZm9ybUVkaXRQcm9maWxlUG9wdXAiLCJpbnB1dE5hbWUiLCJpbnB1dERlc2NyaXB0aW9uIiwibmV3Q2FyZEZvcm0iLCJjYXJkQnV0dG9uIiwiQXBpIiwiYmFzZVBhdGgiLCJ0b2tlbiIsIl9iYXNlUGF0aCIsIl90b2tlbiIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJoZWFkZXJzIiwiX2dldEhlYWRlcnMiLCJ0aGVuIiwiX2dldEpzb24iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwicG9wdXBJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJvcGVuIiwiY2FyZElkIiwicG9wdXBDb25maXJtYXRpb24iLCJjaGFuZ2VIYW5kbGVGb3JtU3VibWl0IiwiYXBpIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwdXRMaWtlIiwiaGFuZGxlTGlrZUNhcmQiLCJkZWxldGVMaWtlIiwiZ2V0RWxlbWVudCIsImNhcmRzQ29udGFpbmVyIiwiYWRkSXRlbSIsInByb2ZpbGVJbmZvIiwicG9wdXBJbmZvIiwic2V0VXNlckluZm8iLCJjdXJyZW50UHJvZmlsZUluZm8iLCJnZXRVc2VySW5mbyIsInBvcHVwTmV3Q2FyZCIsIm5ld0NhcmQiLCJ0aXRsZSIsInZhbGlkYXRvckNhcmQiLCJ2YWxpZGF0b3JQcm9maWxlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldEN1cnJlbnRVc2VyIiwiaW5pdGlhbENhcmRzIiwidXNlckRhdGEiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=