(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o){var i=o.handleCardClick,u=o.handleRemoveTrashButton,a=o.handlePutLike,c=o.handleRemoveLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._cardIdOwner=e.owner._id,this._likes=e.likes,this._userId=n,this._template=r,this._handleCardClick=i,this._handleRemoveTrashButton=u,this._handlePutLike=a,this._handleRemoveLike=c}var n,r;return n=t,(r=[{key:"_getElementFromTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".card__item").cloneNode(!0)}},{key:"getElement",value:function(){return this._element=this._getElementFromTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._cardImage=this._element.querySelector(".card__image"),this._deleteButton=this._element.querySelector(".card__trash"),this._quantityLikes=this._element.querySelector(".card__quantity-likes"),this._quantityLikes.textContent=this._likes.length,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._element.querySelector(".card__name").textContent=this._name,this._isOwnCard(),this._isLiked(),this._addEventListeners(),this._element}},{key:"_addEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._handleRemoveTrashButton(t._cardId)})),this._likeButton.addEventListener("click",(function(){t._definesLikes()})),this._cardImage.addEventListener("click",(function(){t._openImage()}))}},{key:"handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"handleLikeCard",value:function(t){this._likeButton.classList.toggle("card__like_active"),this._likes=t.likes,this._quantityLikes.textContent=this._likes.length}},{key:"_openImage",value:function(){this._handleCardClick(this._name,this._link)}},{key:"_definesLikes",value:function(){this._likeButton.classList.contains("card__like_active")?this._handleRemoveLike(this._cardId):this._handlePutLike(this._cardId)}},{key:"_isOwnCard",value:function(){this._userId!==this._cardIdOwner&&this._deleteButton.remove()}},{key:"_isLiked",value:function(){var t=this;this._likes.some((function(e){return e._id===t._userId}))?this._likeButton.classList.add("card__like_active"):this._likeButton.classList.remove("card__like_active")}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();const r=n;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disabledButton():(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_disabledButton",value:function(){this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled","disabled")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const a=u;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}const s=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}const y=function(){function t(e){var n=e.profileNameSelector,r=e.profileDescriptionSelector,o=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,description:this._profileDescription.textContent,avatar:this._profileAvatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._profileName.textContent=e,this._profileDescription.textContent=n,this._profileAvatar.src=r}},{key:"getUserId",value:function(){return this._id}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}const _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._buttonClose=this._popup.querySelector(".popup__cross")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){t.preventDefault(),"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup")&&t.close()})),this._buttonClose.addEventListener("click",(function(){t.close()}))}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._title=e._popup.querySelector(".popup__title"),e}return e=u,(n=[{key:"open",value:function(t){b(S(u.prototype),"open",this).call(this),this._image.src=t.link,this._image.alt=t.name,this._title.textContent=t.name}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}const L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._form.querySelectorAll(".popup__input")),n._buttonSubmit=n._form.querySelector(".popup__button"),n._textButtonSubmit=n._buttonSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsValues={},this._inputList.forEach((function(e){t._inputsValues[e.name]=e.value})),this._inputsValues}},{key:"setEventListeners",value:function(){var t=this;P(j(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){P(j(u.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoadingData",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._textButtonSubmit}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._formConfirm=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"changeHandleFormSubmit",value:function(t){this._handleSubmit=t}},{key:"setEventListeners",value:function(){var t=this;I(R(u.prototype),"setEventListeners",this).call(this),this._formConfirm.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit()}))}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(_);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}const A=function(){function t(e){var n=e.basePath,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._basePath=n,this._headers=r}var e,n;return e=t,(n=[{key:"_getJson",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"_request",value:function(t,e){return fetch(t,e).then(this._getJson)}},{key:"getInitialCards",value:function(){return this._request("".concat(this._basePath,"/cards"),{headers:this._headers})}},{key:"getCurrentUser",value:function(){return this._request("".concat(this._basePath,"/users/me"),{headers:this._headers})}},{key:"editProfileInfo",value:function(t){return this._request("".concat(this._basePath,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.description})})}},{key:"addNewCard",value:function(t){return this._request("".concat(this._basePath,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})})}},{key:"editProfileAvatar",value:function(t){return this._request("".concat(this._basePath,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})})}},{key:"deleteCard",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t),{method:"DELETE",headers:this._headers})}},{key:"putLike",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers})}},{key:"deleteLike",value:function(t){return this._request("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers})}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var N={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},U=document.querySelector(".profile__button"),V=document.querySelector(".popup_type_edit").querySelector(".popup__form"),F=V.querySelector(".popup__input_type_name"),J=V.querySelector(".popup__input_type_description"),H=document.querySelector(".popup_type_new-card").querySelector(".popup__form"),M=document.querySelector(".profile__add-button"),z=document.querySelector(".popup_type_avatar").querySelector(".popup__form"),$=document.querySelector(".profile__avatar-btn");function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=new A({basePath:"https://mesto.nomoreparties.co/v1/cohort-61",headers:{authorization:"d0048b8d-b031-4f52-9b12-6a593e4f7ea8","Content-Type":"application/json"}});Promise.all([K.getInitialCards(),K.getCurrentUser()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q=i._id,Y.renderItems(o),Z.setUserInfo({name:i.name,about:i.about,avatar:i.avatar})})).catch((function(t){console.log("Ошибка: ".concat(t))}));var Q,W=new k(".popup_type_image");W.setEventListeners();var X=function(t){var e=new r(t,Q,".template-card",{handleCardClick:function(t,e){W.open({name:t,link:e})},handleRemoveTrashButton:function(t){rt.open(),rt.changeHandleFormSubmit((function(){K.deleteCard(t).then((function(){rt.close(),e.handleDeleteCard()})).catch((function(t){console.log("Ошибка: ".concat(t))}))}))},handlePutLike:function(t){K.putLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))},handleRemoveLike:function(t){K.deleteLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))}});return e.getElement()},Y=new s({renderer:function(t){Y.addItem(X(t))}},".photo-grid__list"),Z=new y({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description",profileAvatarSelector:".profile__avatar"}),tt=new L(".popup_type_edit",(function(t){tt.renderLoadingData(!0),K.editProfileInfo(t).then((function(t){Z.setUserInfo(t),tt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){tt.renderLoadingData(!1)}))}));tt.setEventListeners();var et=new L(".popup_type_avatar",(function(t){et.renderLoadingData(!0),K.editProfileAvatar(t).then((function(t){Z.setUserInfo(t),et.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){et.renderLoadingData(!1)}))}));et.setEventListeners(),U.addEventListener("click",(function(){tt.open();var t=Z.getUserInfo();F.value=t.name,J.value=t.description}));var nt=new L(".popup_type_new-card",(function(t){nt.renderLoadingData(!0),K.addNewCard(t).then((function(t){Y.addItem(X(t)),nt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){nt.renderLoadingData(!1)}))}));nt.setEventListeners();var rt=new B(".popup_type_confirm");rt.setEventListeners(),M.addEventListener("click",(function(){nt.open()})),$.addEventListener("click",(function(){et.open()}));var ot=new a(N,H),it=new a(N,V),ut=new a(N,z);ot.enableValidation(),it.enableValidation(),ut.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVWCxPQUNWLElBQU1rQixFQUFxQjVCLEVBQVk2QixjQUN2QzVDLEVBQVVqSixNQUFRNEwsRUFBbUI1TSxLQUNyQ2tLLEVBQWlCbEosTUFBUTRMLEVBQW1CN0csV0FDOUMsSUFHQSxJQUFNK0csR0FBZSxJQUFJdEYsRUFBYyx3QkFHdkMsU0FBOEJ1RixHQUM1QkQsR0FBYVAsbUJBQWtCLEdBQy9CaEMsRUFBSXlDLFdBQVdELEdBQ2R4RCxNQUFLLFNBQUF3RCxHQUNKakMsRUFBZXNCLFFBQVFaLEVBQVd1QixJQUNsQ0QsR0FBYWxHLE9BQ2YsSUFDQ3NFLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxXQUFEeEgsT0FBWXNILEdBQ3pCLElBQ0NzQixTQUFRLFdBQ1BLLEdBQWFQLG1CQUFrQixFQUNqQyxHQUNGLElBZkFPLEdBQWF2QixvQkFpQmIsSUFBTUssR0FBb0IsSUFBSXhELEVBQWtCLHVCQUNoRHdELEdBQWtCTCxvQkFFbEJuQixFQUFXakksaUJBQWlCLFNBQVMsV0FBTzJLLEdBQWFwQixNQUFNLElBQy9EcEIsRUFBYW5JLGlCQUFpQixTQUFTLFdBQU91SyxHQUFZaEIsTUFBTSxJQUVoRSxJQUFNdUIsR0FBZ0IsSUFBSW5LLEVBQWNDLEVBQVVvSCxHQUM1QytDLEdBQW1CLElBQUlwSyxFQUFjQyxFQUFVaUgsR0FDL0NtRCxHQUFrQixJQUFJckssRUFBY0MsRUFBVXNILEdBQ3BENEMsR0FBY0csbUJBQ2RGLEdBQWlCRSxtQkFDakJELEdBQWdCQyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHVzZXJJZCwgdGVtcGxhdGUsIHtoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVJlbW92ZVRyYXNoQnV0dG9uLCBoYW5kbGVQdXRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2NhcmRJZE93bmVyID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlVHJhc2hCdXR0b24gPSBoYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbjtcclxuICAgIHRoaXMuX2hhbmRsZVB1dExpa2UgPSBoYW5kbGVQdXRMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSA9IGhhbmRsZVJlbW92ZUxpa2U7XHJcbiAgfVxyXG4gIFxyXG5cclxuICBfZ2V0RWxlbWVudEZyb21UZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pdGVtJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50RnJvbVRlbXBsYXRlKCk7ICAgIFxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaCcpO1xyXG4gICAgdGhpcy5fcXVhbnRpdHlMaWtlcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3F1YW50aXR5LWxpa2VzJyk7XHJcbiAgICB0aGlzLl9xdWFudGl0eUxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pc093bkNhcmQoKTtcclxuICAgIHRoaXMuX2lzTGlrZWQoKTtcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHt0aGlzLl9oYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbih0aGlzLl9jYXJkSWQpfSk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuX2RlZmluZXNMaWtlcygpfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7dGhpcy5fb3BlbkltYWdlKCl9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlQ2FyZChkYXRhKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9xdWFudGl0eUxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgX29wZW5JbWFnZSgpIHtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICB9XHJcblxyXG4gIF9kZWZpbmVzTGlrZXMoKSB7XHJcbiAgICBpZih0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9fbGlrZV9hY3RpdmUnKSkge1xyXG4gICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMuX2NhcmRJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oYW5kbGVQdXRMaWtlKHRoaXMuX2NhcmRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaXNPd25DYXJkKCkge1xyXG4gICAgaWYodGhpcy5fdXNlcklkICE9PSB0aGlzLl9jYXJkSWRPd25lcikge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9pc0xpa2VkKCkge1xyXG4gICAgaWYodGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsiLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcbi8vINC/0L7QutCw0LfQsNGC0Ywg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuLy8g0YHQutGA0YvRgtGMINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9XHJcbi8vINC/0YDQvtCy0LXRgNC60LAg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjCDQuNC90L/Rg9GC0L7QslxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG4vLyDQv9C10YDQtdC60LvRjtGH0LXQvdC40LUg0LrQvdC+0L/QutC4INC90LAg0LDQutGC0LjQstC90YPRjiDQuNC70Lgg0L3QtdCw0LrRgtC40LLQvdGD0Y5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgIHRoaXMuX2Rpc2FibGVkQnV0dG9uKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gIH0gXHJcbiAgfVxyXG4vLyDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGE0L7RgNC8XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbi8vINGB0LHRgNC+0YEg0LDQutGC0LjQstC90L7QuSDQutC90L7Qv9C60LhcclxuICBfZGlzYWJsZWRCdXR0b24gKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgfTtcclxuLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC90LDQu9C40YfQuNC1INC90LXQstCw0LvQuNC00L3QvtCz0L4g0LjQvdC/0YPRgtCwXHJcbiAgX2hhc0ludmFsaWRJbnB1dCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgfSk7XHJcbiAgfTtcclxuLy8g0L/QtdGA0LXQsdC+0YAg0YTQvtGA0Lwg0LjQtyDQvNCw0YHRgdC40LLQsFxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7IFxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgICAgXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7cmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjsiLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe3Byb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLCBwcm9maWxlQXZhdGFyU2VsZWN0b3J9KXtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhclNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlQXZhdGFyLnNyY1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oe25hbWUsIGFib3V0LCBhdmF0YXJ9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiLCJjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nyb3NzJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9fSk7XHJcbiAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHt0aGlzLmNsb3NlKCl9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGl0ZW0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGl0ZW0ubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGl0ZW0ubmFtZTtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gaXRlbS5uYW1lOyAgICBcclxuICB9XHJcbiAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcclxuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcclxuICAgIHRoaXMuX3RleHRCdXR0b25TdWJtaXQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dHNWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dHNWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nRGF0YShpc0xvYWRpbmcpIHtcclxuICAgIGlmKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gdGhpcy5fdGV4dEJ1dHRvblN1Ym1pdDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmNsYXNzIFBvcHVwQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybUNvbmZpcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUhhbmRsZUZvcm1TdWJtaXQoYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtQ29uZmlybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cENvbmZpcm1hdGlvbjsiLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHtiYXNlUGF0aCwgaGVhZGVyc30pIHtcclxuICAgIHRoaXMuX2Jhc2VQYXRoID0gYmFzZVBhdGg7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9nZXRKc29uKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fZ2V0SnNvbilcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHNgLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcclxuICAgICAgYCR7dGhpcy5fYmFzZVBhdGh9L3VzZXJzL21lYCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlSW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcclxuICAgICAgYCR7dGhpcy5fYmFzZVBhdGh9L3VzZXJzL21lYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgYWJvdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcclxuICAgICAgYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIHB1dExpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFxyXG4gICAgICBgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTsiLCJjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbmNvbnN0IGJ1dHRvbk9wZW5JbmZvUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24nKTtcclxuY29uc3QgaW5mb1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBmb3JtRWRpdFByb2ZpbGVQb3B1cCA9IGluZm9Qb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuY29uc3QgaW5wdXROYW1lID0gZm9ybUVkaXRQcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGZvcm1FZGl0UHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xyXG4vLyDQv9C10YDQtdC80LXQvdC90YvQtSDQtNC70Y8g0L/QvtC/0LDQv9CwINGB0L7Qt9C00LDQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IGNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX25ldy1jYXJkJyk7XHJcbmNvbnN0IG5ld0NhcmRGb3JtID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBjYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuLy8g0L/QtdGA0LXQvNC10L3QvdGL0LUg0LTQu9GPINC/0L7Qv9Cw0L/QsCDQsNCy0LDRgtCw0YDQsFxyXG5jb25zdCBhdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhcicpO1xyXG5jb25zdCBmb3JtQXZhdGFyID0gYXZhdGFyUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmNvbnN0IGJ1dHRvbkF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItYnRuJylcclxuXHJcbmV4cG9ydCB7c2V0dGluZ3MsIGJ1dHRvbk9wZW5JbmZvUHJvZmlsZSwgZm9ybUVkaXRQcm9maWxlUG9wdXAsIGlucHV0TmFtZSwgaW5wdXREZXNjcmlwdGlvbiwgbmV3Q2FyZEZvcm0sIGNhcmRCdXR0b24sIGZvcm1BdmF0YXIsIGJ1dHRvbkF2YXRhcn0iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCAgU2VjdGlvbiAgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtYXRpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7c2V0dGluZ3MsIGJ1dHRvbk9wZW5JbmZvUHJvZmlsZSwgZm9ybUVkaXRQcm9maWxlUG9wdXAsIGlucHV0TmFtZSwgaW5wdXREZXNjcmlwdGlvbiwgbmV3Q2FyZEZvcm0sIGNhcmRCdXR0b24sIGZvcm1BdmF0YXIsIGJ1dHRvbkF2YXRhciB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlUGF0aDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjEnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdkMDA0OGI4ZC1iMDMxLTRmNTItOWIxMi02YTU5M2U0ZjdlYTgnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldEluaXRpYWxDYXJkcygpLCBhcGkuZ2V0Q3VycmVudFVzZXIoKV0pXHJcbi50aGVuKChbaW5pdGlhbENhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgY2FyZHNDb250YWluZXIucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7bmFtZTogdXNlckRhdGEubmFtZSwgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LCBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcn0pO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG4vLyDRgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0Lgg0LXQtSDRhNGD0L3QutGG0LjQvtC90LDQu9CwXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCB1c2VySWQsJy50ZW1wbGF0ZS1jYXJkJyxcclxuICAgIHtoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKHtuYW1lLCBsaW5rfSk7XHJcbiAgICAgIH0sXHJcbiAgICBoYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbjogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmNoYW5nZUhhbmRsZUZvcm1TdWJtaXQoKCkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgaGFuZGxlUHV0TGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBhcGkucHV0TGlrZShjYXJkSWQpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2FyZChkYXRhKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVSZW1vdmVMaWtlOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZClcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VDYXJkKGRhdGEpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfX1cclxuICk7XHJcbmNvbnN0IGNhcmRPYmplY3QgPSBjYXJkLmdldEVsZW1lbnQoKTtcclxucmV0dXJuIGNhcmRPYmplY3Q7XHJcbn1cclxuXHJcbi8vINGB0L7Qt9C00LDQtdC8INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAgU2VjdGlvbiDQtNC70Y8g0L7RgtGA0LjRgdC+0LLQutC4INC60LDRgNGC0L7Rh9C10LpcclxuY29uc3QgY2FyZHNDb250YWluZXIgPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICBjYXJkc0NvbnRhaW5lci5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCkpXHJcbiAgfX0sICcucGhvdG8tZ3JpZF9fbGlzdCcpO1xyXG5cclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcclxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyJ1xyXG59KTtcclxuXHJcbi8vINC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCBwb3B1cEluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdCcsIGhhbmRsZUluZm9Gb3JtU3VibWl0KTtcclxucG9wdXBJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbmZvRm9ybVN1Ym1pdChkYXRhUHJvZmlsZSkge1xyXG4gIHBvcHVwSW5mby5yZW5kZXJMb2FkaW5nRGF0YSh0cnVlKTtcclxuICBhcGkuZWRpdFByb2ZpbGVJbmZvKGRhdGFQcm9maWxlKVxyXG4gIC50aGVuKChkYXRhUHJvZmlsZSkgPT4ge1xyXG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YVByb2ZpbGUpXHJcbiAgICBwb3B1cEluZm8uY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHBvcHVwSW5mby5yZW5kZXJMb2FkaW5nRGF0YShmYWxzZSk7XHJcbiAgfSk7XHJcbiAgfVxyXG5cclxuLy8g0L/QvtC/0LDQvyDQsNCy0LDRgtCw0YDQsFxyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hdmF0YXInLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xyXG5wb3B1cEF2YXRhci5yZW5kZXJMb2FkaW5nRGF0YSh0cnVlKTtcclxuYXBpLmVkaXRQcm9maWxlQXZhdGFyKGRhdGEpXHJcbi50aGVuKChkYXRhKSA9PiB7XHJcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxufSlcclxuLmZpbmFsbHkoKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmdEYXRhKGZhbHNlKTtcclxufSlcclxufVxyXG5cclxuLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPINGBINC/0L7QtNGB0YLQsNCy0LvQtdC90LjQtdC8INC30L3QsNGH0LXQvdC40Lkg0L7RgtGC0YPQtNCwINCyINC/0L7Qv9Cw0L9cclxuYnV0dG9uT3BlbkluZm9Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwSW5mby5vcGVuKCk7XHJcbiAgY29uc3QgY3VycmVudFByb2ZpbGVJbmZvID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dE5hbWUudmFsdWUgPSBjdXJyZW50UHJvZmlsZUluZm8ubmFtZTtcclxuICBpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gY3VycmVudFByb2ZpbGVJbmZvLmRlc2NyaXB0aW9uOyAgXHJcbn0pXHJcblxyXG4vL9C/0L7Qv9Cw0L8g0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgcG9wdXBOZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX25ldy1jYXJkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5wb3B1cE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGRhdGFDYXJkKSB7XHJcbiAgcG9wdXBOZXdDYXJkLnJlbmRlckxvYWRpbmdEYXRhKHRydWUpO1xyXG4gIGFwaS5hZGROZXdDYXJkKGRhdGFDYXJkKVxyXG4gIC50aGVuKGRhdGFDYXJkID0+IHtcclxuICAgIGNhcmRzQ29udGFpbmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhQ2FyZCkpO1xyXG4gICAgcG9wdXBOZXdDYXJkLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwb3B1cE5ld0NhcmQucmVuZGVyTG9hZGluZ0RhdGEoZmFsc2UpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9jb25maXJtJyk7XHJcbnBvcHVwQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3BvcHVwTmV3Q2FyZC5vcGVuKCl9KTtcclxuYnV0dG9uQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3BvcHVwQXZhdGFyLm9wZW4oKX0pO1xyXG5cclxuY29uc3QgdmFsaWRhdG9yQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBuZXdDYXJkRm9ybSk7XHJcbmNvbnN0IHZhbGlkYXRvclByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVkaXRQcm9maWxlUG9wdXApXHJcbmNvbnN0IHZhbGlkYXRvckF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtQXZhdGFyKTtcclxudmFsaWRhdG9yQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnZhbGlkYXRvclByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInVzZXJJZCIsInRlbXBsYXRlIiwiX3JlZiIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZVRyYXNoQnV0dG9uIiwiaGFuZGxlUHV0TGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJZCIsIl9pZCIsIl9jYXJkSWRPd25lciIsIm93bmVyIiwiX2xpa2VzIiwibGlrZXMiLCJfdXNlcklkIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVSZW1vdmVUcmFzaEJ1dHRvbiIsIl9oYW5kbGVQdXRMaWtlIiwiX2hhbmRsZVJlbW92ZUxpa2UiLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRFbGVtZW50RnJvbVRlbXBsYXRlIiwiX2xpa2VCdXR0b24iLCJfY2FyZEltYWdlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9xdWFudGl0eUxpa2VzIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJhbHQiLCJzcmMiLCJfaXNPd25DYXJkIiwiX2lzTGlrZWQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVmaW5lc0xpa2VzIiwiX29wZW5JbWFnZSIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiX3RoaXMyIiwic29tZSIsImxpa2UiLCJhZGQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVkQnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0QXR0cmlidXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJyZXZlcnNlIiwiaXRlbSIsInByZXBlbmQiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfcHJvZmlsZUF2YXRhciIsImRlc2NyaXB0aW9uIiwiYXZhdGFyIiwiX3JlZjIiLCJhYm91dCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfYnV0dG9uQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3NlIiwidGFyZ2V0IiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlIiwiX3RpdGxlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9idXR0b25TdWJtaXQiLCJfdGV4dEJ1dHRvblN1Ym1pdCIsIl9pbnB1dHNWYWx1ZXMiLCJpbnB1dCIsIl90aGlzMyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiUG9wdXBDb25maXJtYXRpb24iLCJfZm9ybUNvbmZpcm0iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0IiwiZXZ0IiwiQXBpIiwiYmFzZVBhdGgiLCJoZWFkZXJzIiwiX2Jhc2VQYXRoIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidXJsIiwib3B0aW9ucyIsImZldGNoIiwidGhlbiIsIl9nZXRKc29uIiwiX3JlcXVlc3QiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1TZWxlY3RvciIsImJ1dHRvbk9wZW5JbmZvUHJvZmlsZSIsImZvcm1FZGl0UHJvZmlsZVBvcHVwIiwiaW5wdXROYW1lIiwiaW5wdXREZXNjcmlwdGlvbiIsIm5ld0NhcmRGb3JtIiwiY2FyZEJ1dHRvbiIsImZvcm1BdmF0YXIiLCJidXR0b25BdmF0YXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0Q3VycmVudFVzZXIiLCJpbml0aWFsQ2FyZHMiLCJ1c2VyRGF0YSIsImNhcmRzQ29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJwcm9maWxlSW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJvcGVuIiwiY2FyZElkIiwicG9wdXBDb25maXJtYXRpb24iLCJjaGFuZ2VIYW5kbGVGb3JtU3VibWl0IiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJwdXRMaWtlIiwiaGFuZGxlTGlrZUNhcmQiLCJkZWxldGVMaWtlIiwiZ2V0RWxlbWVudCIsImFkZEl0ZW0iLCJwb3B1cEluZm8iLCJkYXRhUHJvZmlsZSIsInJlbmRlckxvYWRpbmdEYXRhIiwiZWRpdFByb2ZpbGVJbmZvIiwiZmluYWxseSIsInBvcHVwQXZhdGFyIiwiZWRpdFByb2ZpbGVBdmF0YXIiLCJjdXJyZW50UHJvZmlsZUluZm8iLCJnZXRVc2VySW5mbyIsInBvcHVwTmV3Q2FyZCIsImRhdGFDYXJkIiwiYWRkTmV3Q2FyZCIsInZhbGlkYXRvckNhcmQiLCJ2YWxpZGF0b3JQcm9maWxlIiwidmFsaWRhdG9yQXZhdGFyIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=